###########################################################################################################################
#  Purpose: Xtrabackup configuration file
#  Name   : xtrabackup_mysql_database.conf
#  Deploy : cat /dev/null >/opt/dba_script/xtrabackup_mysql_database.conf;vi /opt/dba_script/xtrabackup_mysql_database.conf
#  Attention!!!! Do not leave space between equal sign and the value
#
#  History: Jackey Lin  Create                                                                                   2013 07 24
#           Jackey Lin  Adjustable binary log search and reduce default backup throttle                          2013 11 08
#           Jackey Lin  Abort and send alert if existing xtrabackup running                                      2013 12 10
#           Jackey Lin  Wrap abort in a function                                                                 2013 12 11
#           Jackey Lin  Add lock-wait-timeout for Xtrabackup 2.1 to avoid "Waiting for table flush" problem      2014 02 10
###########################################################################################################################
#   Backup directory and retention days
###########################################################################################################################
export BACKUP_BASE=/dbbackup
export RETENTION_DAYS=7

###########################################################################################################################
#   Backup type for each weekday( Valid value: full, incr )  
###########################################################################################################################
# Monday
export BACKUPTYPE_DAY1=incr
# Tuesday
export BACKUPTYPE_DAY2=full
# Wednesday
export BACKUPTYPE_DAY3=incr
# Thursday
export BACKUPTYPE_DAY4=full
# Friday
export BACKUPTYPE_DAY5=incr
# Saturday
export BACKUPTYPE_DAY6=incr
# Sunday
export BACKUPTYPE_DAY7=full

###########################################################################################################################
#   Compression and speed throttle ( MB/second )
###########################################################################################################################
export BACKUP_COMPRESS=on
export BACKUP_THROTTLE=20

###########################################################################################################################
#   Wait time in seconds before issuing FLUSH TABLES WITH READ LOCK 
###########################################################################################################################
export LOCK_WAIT_TIMEOUT=600
export LOCK_WAIT_THRESHOLD=60

#######################################################################################################
# Storage usage: abort backup if backup mount point space usage exceed this
#######################################################################################################
export BACKUP_MOUNTPOINT=/dbbackup
export STORAGE_USAGE_PERC=80

###########################################################################################################################
#   Binary backup will search binary logs generated in past N minutes.
###########################################################################################################################
export BINLOG_SEARCH_HOUR=240
###########################################################################################################################
#   Send email to DBA to notify backup status, use space to separate email address
###########################################################################################################################
dba_mail="DCSWebDB@trendmicro.com"
###########################################################################################################################
#   For backup to remote host only 
###########################################################################################################################
export REMOTE_HOST=
export REMOTE_USER=
export REMOTE_BACKUPDIR=
export REMOTE_TMPDIR=
###########################################################################################################################
#   For further copy to another folder mounted from dump server
###########################################################################################################################
export COPY_PATH=
export COPY_RETENTION_DAYS=
###########################################################################################################################